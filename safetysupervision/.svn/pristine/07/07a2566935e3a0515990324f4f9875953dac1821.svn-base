package com.henghao.util;

import com.henghao.vo.CaseEntVo;
import net.sf.json.JSONObject;
import org.henghao.utils.BaiduUtil;

import java.util.List;

/**
 * @author wzp
 * @description: 执法案件相关业务帮助类
 * @create on 2017/12/6.
 */
public class WZPCaseUtil {


    /**
     * 完善CaseEntVo中企业的经纬度数据
     * 传入的list中，CaseEntVo的ID和ent属性值不能为空。
     * 因为这个帮助方法是根据ent（企业名称）查询出这个企业的经纬度，
     * 并将经纬度信息设置入CaseEntVo中的
     * @param list 只有ID和ent（企业名字）的集合List<CaseEntVo>
     * @return 更新了经纬度数据之后的集合List<CaseEntVo>
     */
    public static List<CaseEntVo> updateCaseEntVoLatLng(List<CaseEntVo> list) {
        // 传入集合非空
        if (list == null || list.size() < 1)
            return list;
        // 将信息放入包装类中
        for (CaseEntVo caseEntVo : list) {
            if (caseEntVo != null) {
                // 企业名称
                String entName = caseEntVo.getEnt();
                // 根据企业名称查询经纬度
                JSONObject lngLat = BaiduUtil.getLngLat(entName);
                // 查询返回状态码
                Object res = lngLat.get("status");
                if(res != null){
                	String status = lngLat.get("status").toString();
                    if ("1".equals(status)) {
                        // 查询成功
                        caseEntVo.setLat(lngLat.get("lat").toString());  // 经度
                        caseEntVo.setLng(lngLat.get("lng").toString());  // 纬度
                    }
                }
                
            }
        }


        return list;
    }


}
