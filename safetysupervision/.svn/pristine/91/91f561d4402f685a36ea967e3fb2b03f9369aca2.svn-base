package com.henghao.controller;

import com.henghao.entity.Result;
import com.henghao.entity.wzp.ToHorizonUserEntity;
import com.henghao.entity.wzp.TorHorizonUserDeptEntity;
import com.henghao.service.IWZPUserService;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.ResponseBody;

import javax.annotation.Resource;

/**
 * @author wzp
 * @description: 工作流中的用户控制模块，主要用于APP端调用
 * @create 2017/11/28.
 */
@Controller
@RequestMapping("/user")
public class WZPUserController {

    // service接口
    @Resource
    IWZPUserService userService;

    /**
     * APP端 - 修改用户信息
     * @param userEntity 用户实体类
     * @param userDept 用户部门中间表-实体类
     * @return
     */
    @RequestMapping(value = "/updatePersonal",produces = "application/json;charset=utf-8")
    @ResponseBody
    public Result updatePersonal(ToHorizonUserEntity userEntity, TorHorizonUserDeptEntity userDept){
        Result result = null;
        try {
            result = userService.updatePersonal(userEntity,userDept);
        }catch (Exception e){
            result = new Result(1, "系统繁忙", null);
        }
        return result;
    }

    /**
     * APP端 - 根据用户ID查询用户所属部门ID
     * 用于APP做用户信息修改时调用。
     * @param userId 用户ID
     * @return 部门ID
     */
    @RequestMapping(value = "/selectDeptIdByUserId",produces = "application/json;charset=utf-8")
    @ResponseBody
    public Result selectDeptIdByUserId(String userId){
        Result result = null;
        try {
            result = userService.selectDeptIdByUserId(userId);
        }catch (Exception e){
            result = new Result(1, "系统繁忙", null);
        }
        return result;
    }


}
